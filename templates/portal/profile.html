{% extends "base_portal.html" %}

{% block title %}Mon profil â€” GeoConsulting SARLU{% endblock %}

{% block portal_content %}
<nav class="mb-6 text-sm text-gray-500">
  <a href="{% url 'portal_dashboard' %}" class="hover:text-primary-700">Tableau de bord</a>
  <span class="mx-2">/</span>
  <span class="text-gray-900">Mon profil</span>
</nav>

<div class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm">
  <h1 class="mb-6 text-xl font-bold text-gray-900">Mon profil</h1>

  {% if form.errors %}
    <div class="mb-4 rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700">
      Veuillez corriger les erreurs ci-dessous.
    </div>
  {% endif %}

  <form method="post" enctype="multipart/form-data" class="space-y-5">
    {% csrf_token %}

    <div class="grid gap-5 sm:grid-cols-2">
      <div>
        <label for="id_first_name" class="mb-1 block text-sm font-medium text-gray-700">{{ form.first_name.label }}</label>
        {{ form.first_name }}
        {% if form.first_name.errors %}<p class="mt-1 text-xs text-red-600">{{ form.first_name.errors.0 }}</p>{% endif %}
      </div>
      <div>
        <label for="id_last_name" class="mb-1 block text-sm font-medium text-gray-700">{{ form.last_name.label }}</label>
        {{ form.last_name }}
        {% if form.last_name.errors %}<p class="mt-1 text-xs text-red-600">{{ form.last_name.errors.0 }}</p>{% endif %}
      </div>
    </div>

    <div>
      <label for="id_phone" class="mb-1 block text-sm font-medium text-gray-700">{{ form.phone.label }}</label>
      {{ form.phone }}
      {% if form.phone.errors %}<p class="mt-1 text-xs text-red-600">{{ form.phone.errors.0 }}</p>{% endif %}
    </div>

    <div>
      <label for="id_avatar" class="mb-1 block text-sm font-medium text-gray-700">{{ form.avatar.label }}</label>
      {% if form.instance.avatar %}
        <div class="mb-2">
          <img src="{{ form.instance.avatar.url }}" alt="Avatar" class="h-16 w-16 rounded-full object-cover">
        </div>
      {% endif %}
      {{ form.avatar }}
      {% if form.avatar.errors %}<p class="mt-1 text-xs text-red-600">{{ form.avatar.errors.0 }}</p>{% endif %}
    </div>

    <div class="flex gap-3 pt-2">
      <button type="submit"
              class="inline-flex items-center rounded-lg bg-primary-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-primary-800">
        Enregistrer
      </button>
      <a href="{% url 'portal_dashboard' %}"
         class="inline-flex items-center rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-50">
        Annuler
      </a>
    </div>
  </form>
</div>
{% endblock %}
